package utils

import (
	"bufio"
	"encoding/json"
	"fmt"
	"log"
	"os"
)

// PrettyPrint prints a human-readable struct
func PrettyPrint(v interface{}) (err error) {
	b, err := json.MarshalIndent(v, "", "  ")
	if err == nil {
		fmt.Println(string(b))
	}
	return
}

// ReadFile reads jsons lines given a file and returns a slice of json strings.
func ReadFile(filePath string) []string{
	var loadJson []string
	file, err := os.Open(filePath)
	if err != nil {
		log.Fatal(err)
	}
	defer file.Close()

	scanner := bufio.NewScanner(file)

	for scanner.Scan() {
		text := scanner.Text()
		loadJson=append(loadJson, text)
	}

	return loadJson
}

// WriteLines writes the lines to the given file.
func WriteLines(lines []string, path string) error {
	file, err := os.Create(path)
	if err != nil {
		return err
	}
	defer file.Close()

	w := bufio.NewWriter(file)
	for _, line := range lines {
		fmt.Fprintln(w, line)
	}
	return w.Flush()
}